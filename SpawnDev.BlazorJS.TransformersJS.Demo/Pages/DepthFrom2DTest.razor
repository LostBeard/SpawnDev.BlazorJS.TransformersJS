@page "/"
@page "/DepthFrom2D"

<div style="padding: 1rem;">
    <h3>2D to 2D+Z</h3>
    <div>
        <RadzenStack Orientation="Orientation.Vertical" AlignItems="AlignItems.Normal" JustifyContent="JustifyContent.Left" Gap="0.5rem">
            <RadzenLabel Text="Select an ONNX Depth Estimation Model" Component="DropDownBindValue" />
            <RadzenDropDown @bind-Value=@SelectedModel Data=@Models Style="width: 100%; max-width: 400px;" Name="DropDownBindValue" />
        </RadzenStack>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Normal" JustifyContent="JustifyContent.Left" Gap="0.5rem" Style="padding: 1rem 0;">
            <RadzenCheckBox @bind-Value=@UseWebGPU Name="WebGPUCheckBox" />
            <RadzenLabel Text="WebGPU" Component="WebGPUCheckBox" class="rz-ms-2" />
        </RadzenStack>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Normal" JustifyContent="JustifyContent.Left" Gap="0.5rem" Style="padding: 1rem 0;">
            <input @ref=fileInputRef accept="image/*" type="file" disabled="@(busy || !beenInit)" style="width: 100%;" />
        </RadzenStack>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Normal" JustifyContent="JustifyContent.Left" Gap="0.5rem" Style="padding: 1rem 0;">
            <button onclick="@RunIt" disabled="@(busy || !beenInit || File == null)">Create 2D+Z Image</button>
        </RadzenStack>
    </div>
    <div>
        <ModelLoadView ModelProgresses="@ModelProgresses" />
    </div>
    <div>
        <img width="480" src="@fileObjectUrl" style="min-width: 100px; min-height: 100px; border: 1px solid black; @(string.IsNullOrEmpty(fileObjectUrl) || !string.IsNullOrEmpty(depthObjectUrl) ? "display: none;" : "")">
        <img width="960" src="@depthObjectUrl" style="min-width: 100px; min-height: 100px; border: 1px solid black; @(string.IsNullOrEmpty(depthObjectUrl) ? "display: none;" : "")">
        <br />
        <a style="@(string.IsNullOrEmpty(outputFileName) || string.IsNullOrEmpty(depthObjectUrl) ? "display: none;" : "")" href="@depthObjectUrl" download="@outputFileName">@outputFileName</a>
        <br />
    </div>
    <p>@((MarkupString)logMessage)</p>
</div>

